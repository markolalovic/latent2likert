<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulation of Likert Item Responses • responsesR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Simulation of Likert Item Responses">
<meta property="og:description" content="Provides an easy framework to simulate survey data commonly analyzed in applied social research, specifically Likert items. Users can specify latent variables by providing means, standard deviations, and optionally, skewness and correlations. The generated dataset represents responses to Likert scale questions, which can be used for various purposes, such as validating theoretical findings obtained through factor analysis and structural equation modeling. The package also allows for the estimation of parameters from existing survey data to replicate it more accurately.">
<meta property="og:image" content="https://markolalovic.github.io/responsesR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">responsesR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/responsesR.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction_to_responsesR.html">Introduction to responsesR package</a>
    </li>
    <li>
      <a href="articles/replicating_survey_data.html">Replicating survey data</a>
    </li>
    <li>
      <a href="articles/simulating_survey_data.html">Simulating survey data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/markolalovic/responsesR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level2">
<h2 id="responsesr-simulate-likert-item-responses-in-r-">responsesR: simulate Likert item responses in R <img src="./reference/figures/logo.png" align="right" height="160" style="float:right; height:160px;"><a class="anchor" aria-label="anchor" href="#responsesr-simulate-likert-item-responses-in-r-"></a>
</h2>
<!-- badges: start -->

<p>This package provides an easy framework to simulate survey data commonly analyzed in applied social research, specifically Likert items. Users can specify latent variables by providing means, standard deviations, and optionally, skewness and correlations. The generated data set represents responses to Likert scale questions, which can be used for various purposes, such as validating theoretical findings obtained through factor analysis and structural equation modeling. The package also allows for the estimation of parameters from existing survey data to replicate it more accurately.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the latest version using devtools:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"markolalovic/responsesR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-examples">Code examples<a class="anchor" aria-label="anchor" href="#code-examples"></a>
</h2>
<p>Below are two simple examples. For more details, refer to the articles on the <a href="https://lalovic.io/responsesR/" class="external-link">package website</a>.</p>
<div class="section level3">
<h3 id="simulating-survey-data">Simulating survey data<a class="anchor" aria-label="anchor" href="#simulating-survey-data"></a>
</h3>
<p>Here’s how to generate a simulated survey data. Consider a scenario where 10 participants who completed Course A and 20 participants who completed Course B have answered the question:</p>
<blockquote>
<p>“How would you rate your experience with the course?”</p>
</blockquote>
<p>Suppose that on average participants in Course A had a neutral experience, while those in Course B had a more positive experience. By choosing appropriate parameters for the latent variables and setting the number of categories (to K = 4 in this example), we can generate hypothetical responses (standard deviation sd = 1 and skewness gamma1 = 0, by default):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lalovic.io/responsesR" class="external-link">responsesR</a></span><span class="op">)</span> <span class="co"># load the package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span> <span class="co"># to ensure reproducible results</span></span>
<span></span>
<span><span class="va">course_A</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, mu <span class="op">=</span> <span class="fl">0</span>, K <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">course_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span>, mu <span class="op">=</span> <span class="fl">1</span>, K <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
Below are the generated responses visualized using a grouped bar chart:
<details><summary><b><a style="cursor: pointer;">Click here to expand </a></b>
</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To summarize the results, create a data frame from all responses.</span></span>
<span><span class="va">K</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="va">ngroups</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Poor"</span>, <span class="st">"Fair"</span>, <span class="st">"Good"</span>, <span class="st">"Excellent"</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Course <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, each<span class="op">=</span><span class="va">K</span><span class="op">)</span>,</span>
<span>  Response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">cats</span>, <span class="va">ngroups</span><span class="op">)</span>, levels<span class="op">=</span><span class="va">cats</span><span class="op">)</span>,</span>
<span>  Prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="reference/get_prop_table.html">get_prop_table</a></span><span class="op">(</span><span class="va">course_A</span>, <span class="va">K</span><span class="op">)</span>, <span class="fu"><a href="reference/get_prop_table.html">get_prop_table</a></span><span class="op">(</span><span class="va">course_B</span>, <span class="va">K</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">Prop</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span><span class="co"># &gt; data</span></span>
<span><span class="co">#   Course  Response Prop</span></span>
<span><span class="co"># 1      A      Poor 0.30</span></span>
<span><span class="co"># 2      A      Fair 0.20</span></span>
<span><span class="co"># 3      A      Good 0.20</span></span>
<span><span class="co"># 4      A Excellent 0.30</span></span>
<span><span class="co"># 6      B      Fair 0.10</span></span>
<span><span class="co"># 7      B      Good 0.25</span></span>
<span><span class="co"># 8      B Excellent 0.65</span></span>
<span></span>
<span><span class="co"># The results can then be visualized using a grouped bar chart.</span></span>
<span><span class="va">xbreaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">.8</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">xlimits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">Prop</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="va">xlabs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">xbreaks</span>, <span class="va">percentify</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">Course</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">Course</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"A"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data<span class="op">=</span><span class="va">data</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">Prop</span>, y<span class="op">=</span><span class="va">Response</span>, fill<span class="op">=</span><span class="va">Course</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span>position<span class="op">=</span><span class="fu">position_dodge2</span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span>, padding <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="va">xbreaks</span>, labels <span class="op">=</span> <span class="va">xlabs</span>, limits <span class="op">=</span> <span class="va">xlimits</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu">scale_y_discrete</span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">Response</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span><span class="st">"legend"</span>, </span>
<span>                    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#64BAAA"</span>, <span class="st">"#154E56"</span><span class="op">)</span>, </span>
<span>                    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Course A"</span>, <span class="st">"Course B"</span><span class="op">)</span>,</span>
<span>                    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"How would you rate your experience with the course?"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>        axis.title.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.title.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>        legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">11</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p</span></span></code></pre></div>
</details><p>
</p>
<p><img src="./reference/figures/articles/courses_grouped_bar_chart.svg" width="100%" alt="Courses grouped bar chart"></p>
<p>For a pre- and post comparison, suppose that the participants completed the survey both before and after taking the course. And suppose that participants’ assessments of their skills in:</p>
<ol style="list-style-type: decimal">
<li>Programming on average increased,</li>
<li>Searching online stayed about the same,</li>
<li>Solving problems increased in Course A, but decreased for participants in Course B.</li>
</ol>
<p>Let’s simulate the survey data for this scenario using a 5-point Likert scale (K = 5, by default):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pre- and post assessments of skills: 1, 2, 3 for course A</span></span>
<span><span class="va">pre_A</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">post_A</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Pre- and post assessments of skills: 1, 2, 3 for course B</span></span>
<span><span class="va">pre_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">post_B</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="co"># &lt;-- decrease for skill 3</span></span></code></pre></div>
Below is the grouped bar chart of the generated responses:
<details><summary><b><a style="cursor: pointer;">Click here to expand </a></b>
</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># To summarize the results, create a data frame from all responses.</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">pre_A</span>, <span class="va">post_A</span>, <span class="va">pre_B</span>, <span class="va">post_B</span><span class="op">)</span></span>
<span><span class="va">items</span> <span class="op">&lt;-</span> <span class="fl">6</span> <span class="co"># for 3 questions before and after</span></span>
<span><span class="va">K</span> <span class="op">&lt;-</span> <span class="fl">5</span> <span class="co"># for a 5-point Likert scale</span></span>
<span><span class="va">skills</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Programming"</span>, <span class="st">"Searching online"</span>, <span class="st">"Solving problems"</span><span class="op">)</span></span>
<span><span class="va">questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">skills</span>, <span class="kw">function</span><span class="op">(</span><span class="va">skill</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">skill</span>, <span class="va">K</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">questions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">questions</span>, levels <span class="op">=</span> <span class="va">skills</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span> <span class="op">(</span></span>
<span>  Course <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Course A"</span>, <span class="va">items</span> <span class="op">*</span> <span class="va">K</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Course B"</span>, <span class="va">items</span> <span class="op">*</span> <span class="va">K</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Question <span class="op">=</span> <span class="va">questions</span>,</span>
<span>  Time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"before"</span>, <span class="fl">3</span><span class="op">*</span><span class="va">K</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"after"</span>, <span class="fl">3</span><span class="op">*</span><span class="va">K</span><span class="op">)</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  resp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">K</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="fu"><a href="reference/get_prop_table.html">get_prop_table</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">K</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># &gt; head(data)</span></span>
<span><span class="co">#     Course         Question   Time resp prop</span></span>
<span><span class="co"># 1 Course A      Programming before    1  0.2</span></span>
<span><span class="co"># 2 Course A      Programming before    2  0.4</span></span>
<span><span class="co"># 3 Course A      Programming before    3  0.3</span></span>
<span><span class="co"># 4 Course A      Programming before    4  0.0</span></span>
<span><span class="co"># 5 Course A      Programming before    5  0.1</span></span>
<span><span class="co"># 6 Course A Searching online before    1  0.1</span></span>
<span></span>
<span><span class="co"># And visualize the results with a stacked bar chart:</span></span>
<span><span class="va">data_pos</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">resp</span> <span class="op">&gt;=</span> <span class="fl">4</span>, <span class="op">]</span></span>
<span><span class="va">data_neg</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">resp</span> <span class="op">&lt;=</span> <span class="fl">2</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">data_neu</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">resp</span> <span class="op">==</span> <span class="fl">3</span>, <span class="op">]</span></span>
<span><span class="va">data_neu</span><span class="op">$</span><span class="va">prop</span> <span class="op">&lt;-</span> <span class="va">data_neu</span><span class="op">$</span><span class="va">prop</span> <span class="op">/</span> <span class="fl">2</span></span>
<span></span>
<span><span class="va">data_pos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">data_pos</span>, <span class="va">data_neu</span><span class="op">)</span></span>
<span><span class="va">data_pos</span><span class="op">$</span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data_pos</span><span class="op">$</span><span class="va">resp</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_neg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">data_neg</span>, <span class="va">data_neu</span><span class="op">)</span></span>
<span><span class="va">data_neg</span><span class="op">$</span><span class="va">prop</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="op">-</span><span class="va">data_neg</span><span class="op">$</span><span class="va">prop</span><span class="op">)</span></span>
<span><span class="va">data_neg</span><span class="op">$</span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">data_neg</span><span class="op">$</span><span class="va">resp</span>, levels <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">color_palette</span> <span class="op">&lt;-</span> <span class="fu">brewer.pal</span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span>, name <span class="op">=</span> <span class="st">"BrBG"</span><span class="op">)</span> </span>
<span><span class="va">color_palette</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"#bababaff"</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_pos</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Time</span>, y <span class="op">=</span> <span class="va">prop</span>, fill <span class="op">=</span> <span class="va">resp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data_neg</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_nested</span><span class="op">(</span></span>
<span>    rows <span class="op">=</span> <span class="fu">vars</span><span class="op">(</span><span class="va">Question</span>, <span class="va">Course</span><span class="op">)</span>, switch <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>    strip <span class="op">=</span> <span class="fu">strip_nested</span><span class="op">(</span>size <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span>,</span>
<span>    labeller <span class="op">=</span> <span class="fu">labeller</span><span class="op">(</span>Question <span class="op">=</span> <span class="fu">label_wrap_gen</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>strip.placement <span class="op">=</span> <span class="st">"outside"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span></span>
<span>    axis.ticks.x <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    strip.text.y.left <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,</span>
<span>    panel.spacing.y <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">xlab</span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ylab</span><span class="op">(</span><span class="st">"Percentage"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_continuous</span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, to <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, </span>
<span>                     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">50</span>, <span class="fl">0</span>, <span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span><span class="st">""</span>, breaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, values <span class="op">=</span> <span class="va">color_palette</span>,</span>
<span>                      labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Very poor"</span>, <span class="st">"Poor"</span>, <span class="st">"Fair"</span>, <span class="st">"Good"</span>, <span class="st">"Very good"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p</span></span></code></pre></div>
</details><p>
</p>
<p><img src="./reference/figures/articles/courses_stacked_bar_chart.svg" width="100%" alt="Courses stacked bar chart"></p>
</div>
<div class="section level3">
<h3 id="replicating-survey-data">Replicating survey data<a class="anchor" aria-label="anchor" href="#replicating-survey-data"></a>
</h3>
<p>The following sample code covers the topic of replicating survey data in order to create scale scores. For this, we will use part of <a href="https://search.r-project.org/CRAN/refmans/psych/html/bfi.html" class="external-link">bfi dataset</a> from package psych. In particular, the first 5 items A1-A5 corresponding to agreeableness and attribute gender:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://personality-project.org/r/psych/" class="external-link">psych</a></span><span class="op">)</span></span>
<span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A2"</span>, <span class="st">"A3"</span>, <span class="st">"A4"</span>, <span class="st">"A5"</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">bfi</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vars</span>, <span class="st">"gender"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
Each item was answered on a six point scale ranging from 1 (very inaccurate), to 6 (very accurate) and the size of the female and male samples were 1881 and 919 respectively:
<details><summary><b><a style="cursor: pointer;">Click here to expand </a></b>
</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Males = 1, Females = 2.</span></span>
<span><span class="va">mapdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>old <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="va">mapdf</span><span class="op">$</span><span class="va">new</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">gender</span>, <span class="va">mapdf</span><span class="op">$</span><span class="va">old</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Impute the missing values.</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">var</span> <span class="kw">in</span> <span class="va">vars</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data</span><span class="op">[</span>, <span class="va">var</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="va">var</span><span class="op">]</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="va">var</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span></code></pre></div>
</details><p>
</p>
<table class="table">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
A1
</th>
<th style="text-align:right;">
A2
</th>
<th style="text-align:right;">
A3
</th>
<th style="text-align:right;">
A4
</th>
<th style="text-align:right;">
A5
</th>
<th style="text-align:left;">
gender
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
61617
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Male
</td>
</tr>
<tr>
<td style="text-align:left;">
61618
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Female
</td>
</tr>
<tr>
<td style="text-align:left;">
61620
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Female
</td>
</tr>
<tr>
<td style="text-align:left;">
61621
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Female
</td>
</tr>
<tr>
<td style="text-align:left;">
61622
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Male
</td>
</tr>
<tr>
<td style="text-align:left;">
61623
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Female
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; Female   Male </span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt;   1881    919</span></span></code></pre></div>
<p>Separate the items into two groups according to their gender.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">items_M</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Male"</span>, <span class="va">vars</span><span class="op">]</span></span>
<span><span class="va">items_F</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">data</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span>, <span class="va">vars</span><span class="op">]</span></span></code></pre></div>
<p>To reproduce the items, start by estimating the parameters of the latent variables, assuming they are normal (<code>gamma1 = 0</code> by default) and providing the number of possible response categories <code>K = 6</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">params_M</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/estimate_parameters.html">estimate_parameters</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">items_M</span>, K <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">params_F</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/estimate_parameters.html">estimate_parameters</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">items_F</span>, K <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">params_M</span></span>
<span><span class="co">#&gt;          items</span></span>
<span><span class="co">#&gt; estimates         A1         A2         A3         A4         A5</span></span>
<span><span class="co">#&gt;        mu -0.6618876  0.8649575  0.7645033  0.8412600  0.7734527</span></span>
<span><span class="co">#&gt;        sd  1.0967866  0.7925097  0.8540241  1.1957912  0.8910793</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">params_F</span></span>
<span><span class="co">#&gt;          items</span></span>
<span><span class="co">#&gt; estimates         A1         A2         A3         A4         A5</span></span>
<span><span class="co">#&gt;        mu -1.1272393  1.1838317  1.0758738  1.3342088  0.9543986</span></span>
<span><span class="co">#&gt;        sd  1.1582560  0.7762984  0.8187612  1.4088157  0.8493250</span></span></code></pre></div>
<p>Then, generate new responses to the items using the estimated parameters and correlations:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span> <span class="co"># to ensure reproducible results</span></span>
<span></span>
<span><span class="va">new_items_M</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">items_M</span><span class="op">)</span>, </span>
<span>                             mu <span class="op">=</span> <span class="va">params_M</span><span class="op">[</span><span class="st">"mu"</span>, <span class="op">]</span>, </span>
<span>                             sd <span class="op">=</span> <span class="va">params_M</span><span class="op">[</span><span class="st">"sd"</span>, <span class="op">]</span>,</span>
<span>                             K <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                             R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">items_M</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_items_F</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">items_F</span><span class="op">)</span>, </span>
<span>                             mu <span class="op">=</span> <span class="va">params_F</span><span class="op">[</span><span class="st">"mu"</span>, <span class="op">]</span>,</span>
<span>                             sd <span class="op">=</span> <span class="va">params_F</span><span class="op">[</span><span class="st">"sd"</span>, <span class="op">]</span>,</span>
<span>                             K <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                             R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">items_F</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To compare the results, we can plot the correlation matrix with bar charts on the diagonal:</p>
<p><img src="./reference/figures/articles/agree_items_correlations_comparison.svg" width="100%" alt="Agreeableness items correlations comparison"></p>
The next step would be to create agreeableness scale scores for both groups of participants, by taking the average of these 5 items and visualize the results with a grouped boxplot:
<details><summary><b><a style="cursor: pointer;">Click here to expand </a></b>
</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Combine new items and gender in new_data data frame.</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">new_items_M</span>, <span class="va">new_items_F</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">new_data</span><span class="op">$</span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">items_M</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">items_F</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">new_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We also need to reverse the first item because it has negative correlations</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">A1</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">A1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">A1</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="va">data</span><span class="op">$</span><span class="va">A1</span></span>
<span><span class="va">new_data</span><span class="op">$</span><span class="va">Y1</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">new_data</span><span class="op">$</span><span class="va">Y1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">new_data</span><span class="op">$</span><span class="va">Y1</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="va">new_data</span><span class="op">$</span><span class="va">Y1</span></span>
<span></span>
<span><span class="co"># Create agreeableness scale scores</span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">agreeable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span>, <span class="va">vars</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">new_data</span><span class="op">$</span><span class="va">agreeable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">new_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y1"</span>, <span class="st">"Y2"</span>, <span class="st">"Y3"</span>, <span class="st">"Y4"</span>, <span class="st">"Y5"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># And visualize the results with a grouped boxplot.</span></span>
<span><span class="va">scale_boxplot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">title</span><span class="op">=</span><span class="st">""</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">xbreaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">2</span>, to <span class="op">=</span> <span class="fl">6</span>, length.out <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">data</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">agreeable</span>, y <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="va">xbreaks</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggtitle</span><span class="op">(</span><span class="va">title</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme</span><span class="op">(</span>text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>,</span>
<span>          plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size<span class="op">=</span><span class="fl">10</span><span class="op">)</span>,          </span>
<span>          axis.title.y <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">scale_boxplot</span><span class="op">(</span><span class="va">data</span>, <span class="st">"Agreeableness in men and women"</span><span class="op">)</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">scale_boxplot</span><span class="op">(</span><span class="va">new_data</span>, <span class="st">"Reproduced agreeableness in men and women"</span><span class="op">)</span></span>
<span><span class="fu">plot_grid</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>,  nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</details><p>
</p>
<p><img src="./reference/figures/articles/agreeableness_grouped_boxplot.svg" width="100%" alt="Agreeableness grouped boxplot"></p>
</div>
</div>
<div class="section level2">
<h2 id="dependency-statement">Dependency statement<a class="anchor" aria-label="anchor" href="#dependency-statement"></a>
</h2>
<p>To maintain a lightweight package, responsesR only imports <a href="https://cran.r-project.org/web/packages/mvtnorm/index.html" class="external-link">mvtnorm</a>, along with the standard R packages stats and graphics, which are typically included in R releases. An additional suggested dependency is the package <a href="https://cran.r-project.org/web/packages/sn/index.html" class="external-link">sn</a>, necessary only for generating random responses from correlated Likert items with multivariate skew normal latent distribution. However, the package prompts the user to install this dependency during interactive sessions.</p>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<ul>
<li><a href="https://markolalovic.github.io/responsesR/articles/responsesR.html">Get started</a></li>
<li><a href="https://markolalovic.github.io/responsesR/reference/index.html">Functions reference documentation</a></li>
<li><a href="https://markolalovic.github.io/responsesR/articles/introduction_to_responsesR.html">Introduction to responsesR package</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h2>
<p>Feel free to create issues for bugs or suggestions on the <a href="https://github.com/markolalovic/responsesR/issues" class="external-link">issues page</a>.</p>
<p>You can also make changes and submit a pull request. Contributions may include bug fixes, new features or documentation improvements.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/markolalovic/responsesR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/markolalovic/responsesR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing responsesR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://lalovic.io/" class="external-link">Marko Lalovic</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1305-0192" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
<li><a href="https://codecov.io/gh/markolalovic/responsesR" class="external-link"><img src="https://codecov.io/gh/markolalovic/responsesR/graph/badge.svg?token=HZTG6RUB2J" alt="codecov"></a></li>
<li><a href="https://github.com/markolalovic/responsesR/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/markolalovic/responsesR/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.10889981" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.10889981.svg" alt="DOI"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://lalovic.io/" class="external-link">Marko Lalovic</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
